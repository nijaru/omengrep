{"id":"hgrep-069","title":"Route errors to stderr","description":"**Problem:** Errors print to stdout, breaking JSON mode when errors mix with output.\n\n**Solution:** Use Python sys.stderr for error messages.\n\n**Locations:**\n- cli.mojo: Error messages\n- walker.mojo: 'Error accessing' message\n- reranker.mojo: 'Failed to initialize' message\n\n**Pattern:**\n```mojo\nvar sys = Python.import_module(\"sys\")\n_ = sys.stderr.write(\"Error: ...\\n\")\n```","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-01T18:35:52.912036-08:00","updated_at":"2025-12-01T18:41:01.377036-08:00","closed_at":"2025-12-01T18:41:01.377036-08:00","close_reason":"Fixed: error messages now use print(..., file=stderr)"}
{"id":"hgrep-18s","title":"Add --help flag","description":"**Problem:** No --help flag. Users must guess usage.\n\n**Solution:** Add --help/-h flag with usage info.\n\n```mojo\nif \"--help\" in args or \"-h\" in args:\n    print(\"Usage: hygrep \u003cquery\u003e [path] [--json]\")\n    print(\"\")\n    print(\"Options:\")\n    print(\"  --json    Output structured JSON for agents\")\n    print(\"  --help    Show this help message\")\n    return\n```\n\n**Location:** cli.mojo (arg parsing section)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T18:23:11.753228-08:00","updated_at":"2025-12-01T18:27:22.256978-08:00","closed_at":"2025-12-01T18:27:22.256978-08:00","close_reason":"Fixed: added --help/-h flag with usage info"}
{"id":"hgrep-4n4","title":"Distribution: GitHub releases + Homebrew","description":"**Goal:** Make hygrep installable without cloning repo.\n\n**Tasks:**\n1. Create GitHub Actions workflow for releases\n   - Build binaries for macOS-arm64, linux-x64\n   - Bundle minimal pixi environment\n   - Create release on tag push\n\n2. Create Homebrew tap (nijaru/tap)\n   - Formula downloads binary + sets up deps\n   - `brew install nijaru/tap/hygrep`\n\n3. Add install instructions to README\n\n**Blocked by:** Decide on Python env bundling strategy","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-01T19:29:49.161865-08:00","updated_at":"2025-12-01T19:29:49.161865-08:00"}
{"id":"hgrep-63n","title":"Bind C regex library","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T15:21:42.989827-08:00","updated_at":"2025-12-01T01:26:15.95507-08:00","closed_at":"2025-12-01T01:26:15.95507-08:00","close_reason":"Closed"}
{"id":"hgrep-8eu","title":"Handle circular symlinks","description":"**Problem:** walker.mojo follows all directories. Circular symlinks cause infinite loop/stack overflow.\n\n**Solution:** Track visited directories by their real path (resolved symlinks).\n\n```mojo\nvar visited = Set[String]()\n# In walk loop:\nvar real_path = String(full_path.resolve())\nif real_path in visited:\n    continue\nvisited.add(real_path)\n```\n\n**Location:** src/scanner/walker.mojo:hyper_scan()","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-01T18:35:40.066869-08:00","updated_at":"2025-12-01T18:37:34.266077-08:00","closed_at":"2025-12-01T18:37:34.266077-08:00","close_reason":"Fixed: added visited Set to track real paths"}
{"id":"hgrep-8mo","title":"Avoid double file reads","description":"**Problem:** Files are read twice:\n1. walker.mojo reads file for regex matching\n2. context.py reads same file for tree-sitter parsing\n\n**Solution:** Pass file content from scanner to extractor, or cache reads.\n\n**Locations:**\n- src/scanner/walker.mojo\n- src/inference/bridge.py\n- src/inference/context.py\n\n**Approach:** Return (path, content) tuples from scanner instead of just paths.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-01T19:29:10.684483-08:00","updated_at":"2025-12-01T19:43:15.2749-08:00","closed_at":"2025-12-01T19:43:15.2749-08:00","close_reason":"Implemented ScanMatch struct to carry content from scanner to extractor. Files are now read once in walker.mojo and content passed through to bridge.py/context.py."}
{"id":"hgrep-afl","title":"Add file size limit in scanner (skip \u003e1MB)","description":"**Problem:** walker.mojo:42-51 reads entire file with no size limit. A 10GB log file will OOM.\n\n**Solution:** Check file size before reading, skip files \u003e1MB.\n\n**Location:** src/scanner/walker.mojo:scan_file()\n\n**Pattern (from stdlib):**\n```mojo\n# Check size before read\nvar stat = file.stat()\nif stat.st_size \u003e 1_000_000:\n    return False\n```","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-01T18:22:36.538508-08:00","updated_at":"2025-12-01T18:26:29.752647-08:00","closed_at":"2025-12-01T18:26:29.752647-08:00","close_reason":"Fixed: added MAX_FILE_SIZE check (1MB limit)"}
{"id":"hgrep-dgs","title":"Parallel context extraction","description":"**Problem:** Context extraction in bridge.py is sequential.\n\n**Solution:** Use ThreadPoolExecutor for parallel tree-sitter parsing.\n\n```python\nfrom concurrent.futures import ThreadPoolExecutor\n\nwith ThreadPoolExecutor(max_workers=4) as executor:\n    results = list(executor.map(\n        lambda p: self.extractor.extract(p, query),\n        file_paths\n    ))\n```\n\n**Location:** src/inference/bridge.py:search()","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-01T19:29:23.579625-08:00","updated_at":"2025-12-01T19:44:27.886851-08:00","closed_at":"2025-12-01T19:44:27.886851-08:00","close_reason":"Implemented ThreadPoolExecutor for parallel tree-sitter parsing in bridge.py extraction phase."}
{"id":"hgrep-djw","title":"Scaffold Mojo project structure","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T15:21:32.759144-08:00","updated_at":"2025-11-29T17:24:23.613864-08:00","closed_at":"2025-11-29T17:24:23.613878-08:00"}
{"id":"hgrep-hqm","title":"Implement parallel directory walker","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T15:21:37.876341-08:00","updated_at":"2025-12-01T01:38:03.615718-08:00","closed_at":"2025-12-01T01:38:03.615718-08:00","close_reason":"Closed"}
{"id":"hgrep-hvo","title":"Initialize mask array to False","description":"**Problem:** walker.mojo:98 allocates mask without initialization.\n\n```mojo\nvar mask = alloc[Bool](num_files)  # Not zeroed - undefined behavior\n```\n\n**Solution:** Initialize to False explicitly.\n\n```mojo\nvar mask = alloc[Bool](num_files)\nfor i in range(num_files):\n    mask[i] = False\n```\n\n**Location:** src/scanner/walker.mojo:98","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-01T18:22:48.452649-08:00","updated_at":"2025-12-01T18:25:37.489641-08:00","closed_at":"2025-12-01T18:25:37.489641-08:00","close_reason":"Fixed: added explicit initialization loop"}
{"id":"hgrep-iqf","title":"Validate path exists before scanning","description":"**Problem:** cli.mojo:32 creates Path without validation. Invalid paths produce cryptic errors.\n\n**Solution:** Check path exists and is directory before scanning.\n\n```mojo\nvar root = Path(path_str)\nif not root.exists():\n    print(\"Error: Path does not exist: \" + path_str, file=stderr)\n    return\nif not root.is_dir():\n    print(\"Error: Path is not a directory: \" + path_str, file=stderr)\n    return\n```\n\n**Location:** cli.mojo:32","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-01T18:22:59.73673-08:00","updated_at":"2025-12-01T18:27:17.140246-08:00","closed_at":"2025-12-01T18:27:17.140246-08:00","close_reason":"Fixed: added path exists/is_dir validation"}
{"id":"hgrep-j09","title":"Detect Python version dynamically","description":"**Problem:** reranker.mojo:22-31 has hardcoded Python versions (3.11, 3.12, 3.13). Will break when Python 3.14 ships.\n\n```mojo\npy_versions.append(\"3.13\")\npy_versions.append(\"3.12\")\npy_versions.append(\"3.11\")\n```\n\n**Solution:** Detect Python version from sys.version_info.\n\n```mojo\nvar sys = Python.import_module(\"sys\")\nvar major = Int(sys.version_info.major)\nvar minor = Int(sys.version_info.minor)\nvar site = current_dir + \"/.pixi/envs/default/lib/python\" + String(major) + \".\" + String(minor) + \"/site-packages\"\n```\n\n**Location:** src/inference/reranker.mojo:22-31","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-01T18:23:24.697948-08:00","updated_at":"2025-12-01T18:28:13.497142-08:00","closed_at":"2025-12-01T18:28:13.497142-08:00","close_reason":"Fixed: now uses sys.version_info for dynamic detection"}
{"id":"hgrep-j3d","title":"Expand test coverage","description":"**Current:** 3 smoke tests (regex, walker, bridge)\n\n**Missing:**\n- CLI arg parsing tests\n- All tree-sitter languages (JS, TS, Rust, Go)\n- Edge cases: large files, symlinks, binary files\n- JSON output format validation\n- Error handling paths\n\n**Locations:** tests/","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-01T19:29:36.641436-08:00","updated_at":"2025-12-01T19:29:36.641436-08:00"}
{"id":"hgrep-m2o","title":"Add --top-k flag","description":"**Problem:** Results limited to hardcoded 10. Users may want more or fewer.\n\n**Solution:** Add --top-k N flag to control result count.\n\n```mojo\n# Arg parsing\nif arg.startswith(\"--top-k=\"):\n    top_k = Int(arg[8:])\nelif arg == \"--top-k\":\n    # Next arg is the value\n    ...\n```\n\n**Locations:**\n- cli.mojo: Parse --top-k flag\n- bridge.py: Pass top_k to search()","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-01T18:36:05.100359-08:00","updated_at":"2025-12-01T18:39:08.017808-08:00","closed_at":"2025-12-01T18:39:08.017808-08:00","close_reason":"Fixed: added --top-k N and --top-k=N formats"}
{"id":"hgrep-qgz","title":"Add Mojo tree-sitter support","description":"**Context:** VS Code has Mojo extension with syntax highlighting. Need to check if tree-sitter grammar is available as Python binding.\n\n**Research needed:**\n- Check if tree-sitter-mojo exists on PyPI\n- Check Modular's VS Code extension source\n- May need to build Python bindings if only npm package exists\n\n**Location:** src/inference/context.py","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-01T18:53:36.044315-08:00","updated_at":"2025-12-01T18:53:36.044315-08:00"}
